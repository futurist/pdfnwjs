<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>无纸办公系统</title>
        <style type="text/css">
        *{
        	margin: 0;
        	padding: 0;
        }
        html, body{
            height: 100%;
        }
        .info{
            margin: 100px auto;
        }
        </style>
    </head>
 
<body style="-webkit-app-region: drag">
        <div id="editor" style=" width: 100px; -webkit-transform: rotate(-30deg); -webkit-transform-origin: right bottom;">iowjaegoiajwoejfo</div>
        <div class="info">
            <span id="editMode" class="statuslineitem">Normal</span>
            <span class="title statuslineitem">
            <span class="arrow-right-editMode statuslineitem"></span>
            <span id="title">No file</span>
            </span>
            <span class="mode statuslineitem">
                <span class="arrow-right-title statuslineitem"></span>
            <span id="mode">JavaScript</span>
            </span>
            <span class="linenum statuslineitem">
                <span class="arrow-right-mode statuslineitem"></span>
            <span id="linenum">1</span>
            </span>
            <span class="colnum statuslineitem">
                <span class="arrow-right-linenum statuslineitem"></span>
            <span id="colnum">1</span>
            </span>
            <span class="arrow-right-colnum statuslineitem"></span>
        </div>
 
        <input style="display:block;" id="openFile" type="file" />
        <input style="display:block;" id="saveFile" type="file" />

<iframe id="main" style="display:none; position:fixed; top:0; left:0; width:100%;height:100%;border:none;outline:none" src=""></iframe>

<script type="text/javascript" src="js/fingerprint2.min.js"></script>
<script type="text/javascript">

var url = "http://1111hui.com/pdf/client/tree.html";

new Fingerprint2().get(function(result){
  alert(result);
});

var TaskBarHeight = 30;

var POP_WIDTH=300, POP_HEIGHT=300;

var gui = require('nw.gui');

var win = gui.Window.get();

win.setPosition('center');
win.on('close', function() {
  this.hide(); // Pretend to be closed already
  isShow = false;
});

win.moveTo( Math.round(screen.width-window.outerWidth-40), Math.round(screen.height/2-window.outerHeight/2-TaskBarHeight-10) );
showWin(true);



var isShow = true;
function showWin(toShow){
	if(typeof toShow=='undefined'){
		toShow = !isShow;
	}
	if(toShow){
		win.show();
		win.focus();
		isShow = true;
	} else{
		win.hide();
		isShow = false;
	}

}

var tray;
function init(){
	tray = new gui.Tray({ title: 'Tray', icon: 'img/icon.png' });
	// Give it a menu
	var menu = new gui.Menu();

	var menuItem1 = new gui.MenuItem({ label: '显示' });
	menuItem1.on('click',function(e){
		showWin(1);
	});
	menu.append(menuItem1);

	var menuItem2 = new gui.MenuItem({ label: '退出' });
	menuItem2.on('click',function(e){
		gui.App.quit();
	});
	menu.append(menuItem2);

	tray.menu = menu;

	tray.on('click', function(e){
		showWin();
	});
}

init();


var pop = gui.Window.open('http://baidu.com',{toolbar:false,frame:false,width:POP_WIDTH, height:POP_HEIGHT});
pop.setShowInTaskbar(false);
pop.resizeTo(POP_WIDTH,POP_HEIGHT);
pop.moveTo( screen.width-POP_WIDTH-20, screen.height-POP_HEIGHT-TaskBarHeight-10 );
pop.setAlwaysOnTop(true);
pop.setResizable(false);



        </script>

    </body>
</html>

